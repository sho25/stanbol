begin_unit|revision:0.9.5;language:Java;cregit-version:0.0.1
begin_package
package|package
name|org
operator|.
name|apache
operator|.
name|stanbol
operator|.
name|entityhub
operator|.
name|servicesapi
package|;
end_package

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Collection
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|stanbol
operator|.
name|entityhub
operator|.
name|servicesapi
operator|.
name|mapping
operator|.
name|FieldMapper
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|stanbol
operator|.
name|entityhub
operator|.
name|servicesapi
operator|.
name|mapping
operator|.
name|FieldMapping
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|stanbol
operator|.
name|entityhub
operator|.
name|servicesapi
operator|.
name|model
operator|.
name|EntityMapping
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|stanbol
operator|.
name|entityhub
operator|.
name|servicesapi
operator|.
name|model
operator|.
name|Representation
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|stanbol
operator|.
name|entityhub
operator|.
name|servicesapi
operator|.
name|model
operator|.
name|Sign
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|stanbol
operator|.
name|entityhub
operator|.
name|servicesapi
operator|.
name|model
operator|.
name|Symbol
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|stanbol
operator|.
name|entityhub
operator|.
name|servicesapi
operator|.
name|query
operator|.
name|FieldQuery
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|stanbol
operator|.
name|entityhub
operator|.
name|servicesapi
operator|.
name|query
operator|.
name|FieldQueryFactory
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|stanbol
operator|.
name|entityhub
operator|.
name|servicesapi
operator|.
name|query
operator|.
name|QueryResultList
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|stanbol
operator|.
name|entityhub
operator|.
name|servicesapi
operator|.
name|site
operator|.
name|ReferencedSite
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|stanbol
operator|.
name|entityhub
operator|.
name|servicesapi
operator|.
name|site
operator|.
name|ReferencedSiteManager
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|stanbol
operator|.
name|entityhub
operator|.
name|servicesapi
operator|.
name|yard
operator|.
name|Yard
import|;
end_import

begin_comment
comment|/**  *<p>The Entityhub defines an interface that allows to work with Content and  * Knowledge of referenced Entities. Entities managed by this Hub are called  * {@link Symbol}s and typically define {@link EntityMapping mappings} to  * information provided by other {@link ReferencedSite sites}.</p>  *<p>This interface allows to manage<ul>  *<li>{@link Symbol}: The {@link Representation} (Content and Knowledge)  *      available for entities managed by an entity hub</li>  *<li>{@link EntityMapping}: External Entities that are aligned to {@link Symbol}s  *      managed by this entity hub.</li>  *</ul>  * The entity hub also uses the {@link ReferencedSiteManager} to search/retrieve  * entities/entity representations form other {@link ReferencedSite}s.<p>  * Most of the functionality defined by this interface is also available via   * RESTful service.  * TODO's<ul>  *<li> How to deal with content (references, base62 encoded Strings,  *       {@link InputStream}s ...  *</ul>  * @author Rupert Westenthaler  *  */
end_comment

begin_interface
specifier|public
interface|interface
name|Entityhub
block|{
name|String
name|DEFAUTL_ENTITYHUB_PREFIX
init|=
literal|"urn:org.apache.stanbol:entityhub"
decl_stmt|;
comment|/**      * Getter for the Yard storing the data (Symbols, MappedEntities) of the       * Entityhub.      * @return The yard instance used to store the data of the Entityhub      *  - the EntityhubYard      */
name|Yard
name|getYard
parameter_list|()
function_decl|;
comment|/**      * Getter for an Symbol for an reference to a {@link Sign}. If parsed      * reference refers a Symbol, than this Symbol is returned. In any other      * case this Method searches if the parsed reference is mapped to a      * Symbol and returns the Symbol instead. To check if the parsed reference      * is a {@link Symbol} simple check if {@link Symbol#getId()} equals to the      * parsed reference.      * @param reference the id of the referenced Sign      * @return the symbol representing the parsed entity or<code>null</code> if      * no symbol for the parsed entity is available      * @throws EntityhubException On any error while performing the operation      */
name|Symbol
name|lookupSymbol
parameter_list|(
name|String
name|reference
parameter_list|)
throws|throws
name|EntityhubException
function_decl|;
comment|/**      * Getter for an Symbol for an reference to a {@link Sign}. If parsed      * reference refers a Symbol, than this Symbol is returned. In any other      * case this Method searches if the parsed reference is mapped to a      * Symbol and returns the Symbol instead. To check if the parsed reference      * is a {@link Symbol} simple check if {@link Symbol#getId()} equals to the      * parsed reference.<br>      * If<code>create=true</code> and no {@link EntityMapping} is present for      * the parsed reference, than a new Symbol is created and returned.      *      * @param reference the id of the referenced Sign      * @param create if<code>true</code> the {@link Entityhub} will try to create a      * {@link Symbol} if necessary      * @return the symbol or<code>null</code> if the parsed reference is not      * known by any referenced sites.      * @throws IllegalArgumentException If the referenced {@link Sign} was found, no      * existing {@link EntityMapping} is present, but it is not possible to      * create an {@link Symbol} for this {@link Sign} (normally because the      * {@link Representation} of the {@link Sign} provides insufficient data).      * @throws EntityhubException On any error while performing the operation      */
name|Symbol
name|lookupSymbol
parameter_list|(
name|String
name|reference
parameter_list|,
name|boolean
name|create
parameter_list|)
throws|throws
name|IllegalArgumentException
throws|,
name|EntityhubException
function_decl|;
comment|/**      * Getter for a Symbol by ID. This method does only work with IDs of      * Symbols managed by the Entityhub. To lookup Symbols by the ID of a Symbol,      * a mappedEntity or an Entity of an referenced site use the      * {@link #lookupSymbol(String, boolean)} method.      * @param symbolId the ID of the Symbol      * @return the Symbol or<code>null</code> if no {@link Symbol} with that      * ID is managed by the Entityhub.      * @throws IllegalArgumentException if<code>null</code> or an empty String      * is parsed as symbolId      * @throws EntityhubException On any error while performing the operation      */
name|Symbol
name|getSymbol
parameter_list|(
name|String
name|symbolId
parameter_list|)
throws|throws
name|IllegalArgumentException
throws|,
name|EntityhubException
function_decl|;
comment|/**      * Creates a Symbol for the parsed reference. If there is already a Symbol      * present for the parsed reference, than this Method throws an      * {@link IllegalStateException}. If no Sign can be found for the parsed      * Reference, than<code>null</code> is returned.      * If the referenced {@link Sign} provides      * insufficient data to create a {@link Symbol}, than an      * {@link IllegalArgumentException} is thrown.      * @param reference the id of the {@link Sign}      * @return the Symbol or<code>null</code> if the no {@link Sign} was found      * for the parsed reference.      * @throws IllegalStateException if there exists already a {@link Symbol} for      * the parsed reference      * @throws IllegalArgumentException  If the referenced {@link Sign} was found, no      * existing {@link EntityMapping} is present, but it is not possible to      * create an {@link Symbol} for this {@link Sign} (normally because the      * {@link Representation} of the {@link Sign} provides insufficient data).      * @throws EntityhubException On any error while performing the operation      */
name|Symbol
name|createSymbol
parameter_list|(
name|String
name|reference
parameter_list|)
throws|throws
name|IllegalStateException
throws|,
name|IllegalArgumentException
throws|,
name|EntityhubException
function_decl|;
comment|/**      * Getter for a MappedEntity based on the ID      * @param id the id of the mapped entity      * @return the MappedEntity or<code>null</code> if none was found      * @throws EntityhubException On any error while performing the operation      */
name|EntityMapping
name|getMappingById
parameter_list|(
name|String
name|id
parameter_list|)
throws|throws
name|EntityhubException
function_decl|;
comment|/**      * Getter for all mappings for a entity      * TODO: check if an Entity can be mapped to more than one Symbol      * @param reference the ID of the referred entity      * @return Iterator over all the Mappings defined for this entity      * @throws EntityhubException On any error while performing the operation      */
name|EntityMapping
name|getMappingByEntity
parameter_list|(
name|String
name|reference
parameter_list|)
throws|throws
name|EntityhubException
function_decl|;
comment|/**      * Getter for the {@link FieldQueryFactory} instance of the Entityhub. Typical      * implementation will return the factory implementation used by the current      * {@link Yard} used by the entity hub.      * @return the query factory      */
name|FieldQueryFactory
name|getQueryFavtory
parameter_list|()
function_decl|;
comment|/**      * Getter for the FieldMappings configured for this Site      * @return The {@link FieldMapping} present for this Site.      */
name|FieldMapper
name|getFieldMappings
parameter_list|()
function_decl|;
comment|//    /**
comment|//     * Getter for the Configuration for the entity hub
comment|//     * @return the configuration of the entity hub
comment|//     */
comment|//    EntityhubConfiguration getEntityhubConfiguration();
comment|/**      * Getter for all the mappings of the parsed reference to a {@link Symbol}      * @param symbol the reference to the symbol      * @return the mappings for the parsed Symbol      * @throws EntityhubException On any error while performing the operation      */
name|Collection
argument_list|<
name|EntityMapping
argument_list|>
name|getMappingsBySymbol
parameter_list|(
name|String
name|symbol
parameter_list|)
throws|throws
name|EntityhubException
function_decl|;
comment|/**      * Searches for symbols based on the parsed {@link FieldQuery} and returns      * the references (ids). Note that selected fields of the query are ignored.      * @param query the query      * @return the references of the found symbols      * @throws EntityhubException On any error while performing the operation      */
name|QueryResultList
argument_list|<
name|String
argument_list|>
name|findSymbolReferences
parameter_list|(
name|FieldQuery
name|query
parameter_list|)
throws|throws
name|EntityhubException
function_decl|;
comment|/**      * Searches for symbols based on the parsed {@link FieldQuery} and returns      * representations as defined by the selected fields of the query. Note that      * if the query defines also {@link Constraint}s for selected fields, that      * the returned representation will only contain values selected by such      * constraints.      * @param query the query      * @return the found symbols as representation containing only the selected      * fields and there values.      * @throws EntityhubException On any error while performing the operation      */
name|QueryResultList
argument_list|<
name|Representation
argument_list|>
name|find
parameter_list|(
name|FieldQuery
name|query
parameter_list|)
throws|throws
name|EntityhubException
function_decl|;
comment|/**      * Searches for Signs based on the parsed {@link FieldQuery} and returns      * the selected Signs including the whole representation. Note that selected      * fields of the query are ignored.      * @param query the query      * @return All Entities selected by the Query.      * @throws EntityhubException On any error while performing the operation      */
name|QueryResultList
argument_list|<
name|Symbol
argument_list|>
name|findSymbols
parameter_list|(
name|FieldQuery
name|query
parameter_list|)
throws|throws
name|EntityhubException
function_decl|;
block|}
end_interface

end_unit

